

## 工作模式

### 命令模式

1. 进入 vi(vim) 编辑器后的默认模式。

2. 按下`Esc`键即可进入命令模式。不管处于任何时候，何种模式，

3. 在命令模式下，此时从键盘上输入的任何字符都被当做编辑命令来解释。用于处理自己的文档

> 但需注意的是，所输入的命令并不回显在屏幕上。若输入的字符不是 vi 的合法命令，vi 会响铃报警。



### 输入模式

1. 进入输入模式（命令模式下输入）

   + 插入命令`i`
   + 附加命令`a`
   + 打开命令`o`
   + 修改命令`c`
   + 取代命令`r`
   + 替换命令`s`

   

> 在该模式下，用户输入的任何字符都被 vi 当做文件内容保存起来，并将其显示在屏幕上。
>
> 想回到命令模式下，按下`Esc`键即可





### 末行模式：

1. 末行模式也称 ex 转义模式。

2. 内置的命令行接口；

3. 进入末行模式：在命令模式下，按`:`键即可进入，此时 vi 会在显示窗口的最后一行显示一个`:`作为末行模式的说明符，等待用户输入命令。多数文件管理命令都是在此模式下执行的。



> 末行命令执行完后，vi 自动回到命令模式。





## 打开文件

1. vim [options]  [file ..]
   + vim +n：打开文件后，直接让光标处于第 n 行的行首；
   + vim +：打开文件后，光标处于文件最末行
   + vim  +/PATTERN：打开文件后，直接让光标处于第一个被 PATTERN 匹配到的行的行首；



2. 打开文件可能出现：

   [O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort:

   1. 原因：编辑文件时断网或同一个文件在上一次编辑时未进行保存
   2. 解决：
      + 如不想编辑该文档，直接按下q就离开vim，也就是退出编辑
      + 如想继续重新编辑该文档、按下E

   3. 六个选项的说明：
      + `O`： 打开此档案成为只读档，查阅该档案内容并不想要进行编辑行为时
      + `E`：还是用正常的方式打开你要编辑的那个档案， 并不会载入暂存盘的内容。很容易出现两个使   用者互相改变对方的档案等问题！
      + `R`： 就是加载暂存盘的内容，用在你要救回之前未储存的工作。 不过当你救回来并且储存离开 vim 后，还是要手动自行删除那个暂存档
      + `D`：确定暂存档是无用的，那么开启档案前会先将这个暂存盘删除！
      + `Q`：按下 q 就离开 vim ，不会进行任何动作回到命令提示字符。
      + `A`：忽略这个编辑行为

   

## 关闭文件



+ `ZZ`：保存并退出；
+ `:q`：退出
+ `:q!`： 强制退出，不保存此前的编辑操作
+ `:wq`：保存并退出；(:w, :q)			
+ `:wq!`：强制保存并退出；(:w, :q!)			
+ `:x`：保存并退出；
+ `:w /PATH/TO/SOMEFILE`：保存到指定位置；



> `:` 表示在末行模式下：



## 光标跳转

1. 字符间跳转

   + `h`：左
   + `j`：下
   + `k`：上
   + `l`：右

   > #COMMAND：跳转由#指定的个数的字符；如，`5l`表示向右调5个字符



2. 单词间跳转

   + `w`：下一个单词的词首；
   + `e`：当前或后一个单词的词尾；
   + `b`：当前或前一个单词的词首；

   >  #COMMAND：跳转由#指定的个数的单词；



3. 行首行尾跳转
   + `^`：跳转至行首的第一个非空白字符；
   + `0`：跳转至行首；
   + `$`：跳转至行尾；



4. 行间跳转
   + `#G`：跳转至由#指定的行；
   + `1G`, `gg`：第一行；
   + `G`：最后一行；
     				
5. 句间跳转：
   + `)` ：上一句
   + `(` ：下一句
     			
6. 段间跳转
   + `}` ：上一段
   + `{` ：下一段



## 翻屏操作

+ Ctrl+f：向文件尾翻一屏
+ Ctrl+b：向文件首部翻一屏
+ Ctrl+d：向文件尾部翻半屏
+ Ctrl+u：向文件首部翻半屏
+ Enter：按行向后翻



## 编辑命令

1. 字符编辑：
   + `x`：删除光标所在处的字符；
   + `#x`：删除光标所在处起始的后 # 个字符；
   + `X`：删除光标前面的字符
   + `#X`：删除光标所在处前 # 个字符；
   + `xp`：交换光标所在处的字符与其后面的字符的位置；



2. 替换命令(replace)：
   + `r`：替换光标所在处的字符；(`rCHAR`)



3. 删除命令：

   `d`：删除命令，可结合光标跳转字符，实现范围删除；

   - `dd` ：删除光标所在的整行。
   - `ndd` ：删除当前行及其后 n-1 行的内容。
   - `D` 或 `d$` ：删除从光标所在处开始到行尾的内容。
   - `d0` ：删除从光标前一个字符开始到行首的内容。
   - `dw` ：删除一个单词。若光标处在某个词的中间，则从光标所在位置开始删至词尾。
   - `de`：删除光标的后一个单词
   - `db`：删除光标的前一个单词
   - `ndw` ：删除 n 个指定的单词。
   - `d(` ：删除到上一句开始的所有字符。
   - `d)` ：删除到下一句开始的所有字符。
   - `d}` ：删除到上一段开始的所有字符。
   - `d{` ：删除到下一段开始的所有字符。
   - `d<CR>` ：删除包括当前行在内的两行字符（<CR>表示回车）。

   

   + #COMMAND



4. 粘贴命令
   + p：缓冲区中的内容如果为整行，则粘贴在当前光标所在行的下方；否则，则粘贴至当前光标所在处的后方；
   + P：缓冲区中的内容如果为整行，则粘贴在当前光标所在行的上方；否则，则粘贴至当前光标所在处的前方；



5. 复制命令
   + `yy` ：复制光标所在的整行。
   + `nyy` ：复制当前行及其后 n-1 行的内容
   + `y0` ：复制从光标前一个字符开始到行首的内容
   + `Y` 或 `y$` ：两复制从光标所在处开始到行尾的内容。
   + `yw` ：复制一个单词。若光标处在某个词的中间，则从光标所在位置开始复制至词尾。
   + `nyw` ：复制 n 个指定的单词。
   + `y)` ：复制到下一句幵始的所有字符。
   + `y} `：复制到下一段开始的所有字符。
   + `y<CR> `：复制包括当前行在内的两行内容。（<CR> 表示回车）



